---
import "normalize.css";
import "magick.css";

interface Props {
  title: string;
}

const { title } = Astro.props;

const year = new Date().getFullYear();
---

<!doctype html>
<html lang="en">
  <head>
    <meta
      name="description"
      content="An open-source, next-generation messaging protocol with foundations in security and accessibility. Fostering secure and efficient communication and nurturing better connectivity, particularly in underdeveloped areas."
    />
    <meta property="og:title" content="Purple Bubble" />
    <meta
      property="og:description"
      content="An open-source, next-generation messaging protocol with foundations in security and accessibility. Fostering secure and efficient communication and nurturing better connectivity, particularly in underdeveloped areas."
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="utf-8" />
    <meta property="twitter:card" content="summary_large_image" />

    <title>{title}</title>
  </head>
  <body>
    <div class="cursor-gradient"></div>
    <header><h1>{title}</h1></header>
    <main>
      <slot />
    </main>
    <footer>&copy {year} Purple Bubble</footer>
  </body>
</html>

<style is:global>
  .cursor-gradient {
    overflow: visible;
    position: fixed;
    width: 100%;
    height: 100%;
    background: radial-gradient(
      circle closest-side at var(--x) var(--y),
      #8100e5,
      transparent 20rem
    );
    background-blend-mode: multiply; /* Creates the grainy effect */
    filter: blur(5px); /* Adjust blur amount */
    opacity: 0.5; /* Adjust opacity */
    pointer-events: none; /* Prevents clicks on the gradient */
    z-index: -1; /* Ensures the gradient stays behind other elements */
  }

  form {
    /* round the corners */
    border-radius: 0.5rem;
    background-color: var(--transparent-form-bg);
  }

  html {
    --transparent-form-bg: color-mix(in srgb, var(--form-bg), #0000 50%);
  }
</style>

<script>
  const cursorGradient = document.querySelector(
    ".cursor-gradient"
  ) as HTMLElement;

  document.addEventListener("mousemove", (event) => {
    cursorGradient.style.setProperty("--x", event.clientX + "px");
    cursorGradient.style.setProperty("--y", event.clientY + "px");
  });
</script>

<script>
  const header = document.querySelector("header");
  header.style.paddingTop = getComputedStyle(header).marginTop;
  header.style.marginTop = "0";
</script>
